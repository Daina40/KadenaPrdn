{% extends 'style_information/base.html' %} 
{% block title %}Saved Style Details{% endblock %} 
{% block content %} 

<h2 class="text-xl font-bold mb-4">Summary of Style Information</h2> 

<table class="min-w-full table-auto border border-black text-sm w-full mb-[100px]"> 
    <thead class="bg-gray-300"> 
        <tr class="border p-1 text-center"> 
            <th class="border p-1">Customer</th> 
            <th class="border p-1">Style</th> 
            <th class="border p-1">Style Description</th> 
            <th class="border p-1">Season</th> 
            <th class="border p-1">Program</th> 
            <th class="border p-1">Date</th> 
            <th class="border p-1" style="width: 5%;">Action</th> 
            <th class="border p-1" style="width: 5%;">Remarks</th> 
        </tr> 
    </thead> 
    <tbody>
        {% if customers %}
            {% for cust in customers %}
                {% for item in cust.styles %}
                    {% for row in item.rows %}
                        <tr>
                            {% if forloop.first and forloop.parentloop.first %}
                                <td class="border p-1" rowspan="{{ cust.rowspan }}">{{ cust.customer }}</td>
                            {% endif %}
                            {% if forloop.first %}
                                <td class="border p-1" rowspan="{{ item.rowspan }}">{{ item.style_no }}</td>
                            {% endif %}

                            <td class="border p-1">
                                {% if row.first_description %}
                                    {{ row.first_description.style_description }}
                                {% else %}
                                    No description
                                {% endif %}
                            </td>

                            <td class="border p-1">{{ row.season }}</td>
                            <td class="border p-1">{{ row.program }}</td>
                            <td class="border p-1">{{ row.created_at|date:"d-M-Y" }}</td>

                            <td class="border p-1"> 
                                {% if not read_only %}
                                <div class="flex justify-between"> 
                                    <a href="{% url 'style_view' row.id %}" class="text-[18px] text-blue-500 py-1 mr-1 rounded" title="View Style (Read Only)">
                                        <i class="fa-solid fa-eye"></i>
                                    </a>
                                    <a href="#" class="text-[18px] text-red-600 py-1 mr-1 rounded" 
                                        onclick="return confirm('Are you sure you want to delete this entry?');"> 
                                        <i class="fa-solid fa-trash-can"></i> 
                                    </a> 
                                    <a href="#" class="text-[18px] text-yellow-500 py-1 rounded"> 
                                        <i class="fa-solid fa-pencil"></i> 
                                    </a> 
                                </div> 
                                {% endif %}
                            </td> 
                            <td class="border p-1"> 
                                <div class="flex justify-center gap-2"> 
                                    <a href="#" class="text-[20px] text-green-500 py-1 mr-1 rounded"> 
                                        <i class="fa-solid fa-square-check"></i> 
                                    </a> 
                                    <a href="#" class="text-[18px] text-yellow-500 py-1 rounded"> 
                                        <i class="fa-solid fa-hourglass-half"></i> 
                                    </a> 
                                </div> 
                            </td>
                        </tr>
                    {% endfor %}
                {% endfor %}
            {% endfor %}
        {% else %}
            <tr>
                <td class="border p-1 text-center" colspan="8">No saved style found.</td>
            </tr>
        {% endif %}
    </tbody>
</table> 

{% endblock %}